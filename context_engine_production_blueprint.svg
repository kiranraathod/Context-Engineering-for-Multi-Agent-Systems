<svg version="1.1" width="1600" height="3600" viewBox="0 0 1600 3600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
    <!-- Combined filters from all three SVGs -->
    <filter id="filter0" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="2.8284"/>
        <feOffset dx="3.1113" dy="3.1113" result="G1"/>
        <feComposite in="SourceGraphic" in2="G1" operator="over"/>
    </filter>
    <!-- Arrowhead Marker for Connectors -->
    <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4A90E2" />
    </marker>
</defs>

<style type="text/css">
    *{stroke-linecap:butt;stroke-linejoin:round;}
    .connector-text {
        font-family: sans-serif;
        font-size: 24px;
        font-weight: bold;
        fill: #4A90E2;
        text-anchor: middle;
    }
</style>

<!-- Main container for the entire map -->
<g id="Chapter10_Map">

    <!-- ===================================================================== -->
    <!-- ======================= PHASE 1 STARTS HERE ========================= -->
    <!-- ===================================================================== -->
    <g id="Phase1_Productionizing" transform="translate(100, 50)">
        <path d="M0,0 L1400,0 L1400,1000 L0,1000 z" fill="#FFFFFF"/>
        <text transform="translate(700,30)" font-family="sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Phase 1 - Productionizing the Glass Box Engine Architecture</text>
        <g filter="url(#filter0)">
        <path d="M70,950 C56.1929,950 56.1929,200 70,200 L1330,200 C1343.81,200 1343.81,950 1330,950 z" fill="#D3D3D3" fill-opacity="0.2" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(98,220)" font-family="sans-serif" font-size="18" font-weight="bold">Kubernetes Cluster (Cloud Infrastructure)</text>
        <text transform="translate(210,100)" font-family="sans-serif" font-size="15" text-anchor="middle">Client Request</text>
        <text transform="translate(210,118)" font-family="sans-serif" font-size="15" text-anchor="middle">(Goal)</text>
        <path d="M210,124 L210,170" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M204.228,162.114 L210,170 L215.772,162.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M98,200 C91.0965,200 91.0965,150 98,150 L322,150 C328.904,150 328.904,200 322,200 z" fill="#A2D2FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(210,175)" font-family="sans-serif" font-size="14" text-anchor="middle">API Gateway</text>
        <text transform="translate(210,191.6)" font-family="sans-serif" font-size="14" text-anchor="middle">(Auth, Rate Limit)</text>
        <g filter="url(#filter0)">
        <path d="M140,350 C133.096,350 133.096,250 140,250 L420,250 C426.904,250 426.904,350 420,350 z" fill="#4A90E2" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(280,300)" font-family="sans-serif" font-size="15" text-anchor="middle">API Service (FastAPI)</text>
        <text transform="translate(280,318)" font-family="sans-serif" font-size="15" text-anchor="middle">(Request Validation,</text>
        <text transform="translate(280,336)" font-family="sans-serif" font-size="15" text-anchor="middle">Dispatch)</text>
        <path d="M210,200 L210,250" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M204.228,242.114 L210,250 L215.772,242.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M490,350 C483.096,350 483.096,250 490,250 L700,250 C706.904,250 706.904,350 700,350 z" fill="#A2D2FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(595,300)" font-family="sans-serif" font-size="15" text-anchor="middle">Task Queue</text>
        <text transform="translate(595,318)" font-family="sans-serif" font-size="15" text-anchor="middle">(Celery/RabbitMQ)</text>
        <path d="M420,300 L490,300" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M482.114,294.228 L490,300 L482.114,305.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(455,285)" font-family="sans-serif" font-size="13" text-anchor="middle">Dispatch Task</text>
        <g filter="url(#filter0)">
        <path d="M770,550 C756.193,550 756.193,250 770,250 L1120,250 C1133.81,250 1133.81,550 1120,550 z" fill="#FF6F61" fill-opacity="0.30196" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(945,270)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Worker Pool (Autoscaling)</text>
        <g filter="url(#filter0)">
        <path d="M798,370 C791.096,370 791.096,300 798,300 L1092,300 C1098.9,300 1098.9,370 1092,370 z" fill="#FF6F61" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(945,335)" font-family="sans-serif" font-size="13" text-anchor="middle">Context Engine Worker 1</text>
        <text transform="translate(945,350.2)" font-family="sans-serif" font-size="13" text-anchor="middle">(Planner, Agents, Executor)</text>
        <g filter="url(#filter0)">
        <path d="M798,460 C791.096,460 791.096,390 798,390 L1092,390 C1098.9,390 1098.9,460 1092,460 z" fill="#FF6F61" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(945,425)" font-family="sans-serif" font-size="13" text-anchor="middle">Context Engine Worker N</text>
        <path d="M700,325 L770,325" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M762.114,319.228 L770,325 L762.114,330.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(735,310)" font-family="sans-serif" font-size="13" text-anchor="middle">Pull Task</text>
        <g filter="url(#filter0)">
        <path d="M1190,550 C1176.19,550 1176.19,250 1190,250 L1358,250 C1371.81,250 1371.81,550 1358,550 z" fill="#C8B6FF" fill-opacity="0.2" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,270)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">External</text>
        <g filter="url(#filter0)">
        <path d="M1218,370 C1211.1,370 1211.1,300 1218,300 L1330,300 C1336.9,300 1336.9,370 1330,370 z" fill="#C8B6FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,335)" font-family="sans-serif" font-size="13" text-anchor="middle">LLM API</text>
        <text transform="translate(1274,350.2)" font-family="sans-serif" font-size="13" text-anchor="middle">(OpenAI)</text>
        <g filter="url(#filter0)">
        <path d="M1218,460 C1211.1,460 1211.1,390 1218,390 L1330,390 C1336.9,390 1336.9,460 1330,460 z" fill="#C8B6FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,425)" font-family="sans-serif" font-size="13" text-anchor="middle">Vector DB</text>
        <text transform="translate(1274,440.2)" font-family="sans-serif" font-size="13" text-anchor="middle">(Pinecone)</text>
        <path d="M1092,335 L1218,335" fill="none" stroke="#000000" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M1213.95,330.949 L1218,335 L1213.95,339.051 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <path d="M1092,425 L1218,425" fill="none" stroke="#000000" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M1213.95,420.949 L1218,425 L1213.95,429.051 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M770,700 C763.096,700 763.096,600 770,600 L1120,600 C1126.9,600 1126.9,700 1120,700 z" fill="#6DB65B" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(945,650)" font-family="sans-serif" font-size="15" text-anchor="middle">Result Store (Redis/DB)</text>
        <text transform="translate(945,668)" font-family="sans-serif" font-size="15" text-anchor="middle">(Stores Final Output &amp; Traces)</text>
        <path d="M945,550 L945,600" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M939.228,592.114 L945,600 L950.772,592.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(970,575)" font-family="sans-serif" font-size="13">Persist Results</text>
        <g filter="url(#filter0)">
        <path d="M140,900 C126.193,900 126.193,650 140,650 L700,650 C713.807,650 713.807,900 700,900 z" fill="#F5A623" fill-opacity="0.30196" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(420,670)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Observability Stack</text>
        <g filter="url(#filter0)">
        <path d="M168,760 C161.096,760 161.096,690 168,690 L406,690 C412.904,690 412.904,760 406,760 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(287,725)" font-family="sans-serif" font-size="14" text-anchor="middle">Logging (ELK/Splunk)</text>
        <g filter="url(#filter0)">
        <path d="M434,760 C427.096,760 427.096,690 434,690 L672,690 C678.904,690 678.904,760 672,760 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(553,725)" font-family="sans-serif" font-size="14" text-anchor="middle">Metrics (Prometheus)</text>
        <g filter="url(#filter0)">
        <path d="M168,850 C161.096,850 161.096,780 168,780 L406,780 C412.904,780 412.904,850 406,850 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(287,815)" font-family="sans-serif" font-size="14" text-anchor="middle">Tracing (Jaeger)</text>
        <path d="M280,350 L280,690" fill="none" stroke="#FFA500" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M275.949,685.949 L280,690 L284.051,685.949 z" fill="#FFA500" stroke="#FFA500" stroke-width="1"/>
        <path d="M840,550 L350,690" fill="none" stroke="#FFA500" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M354.271,687.155 L350,690 L352.908,686.182 z" fill="#FFA500" stroke="#FFA500" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M1190,900 C1183.1,900 1183.1,800 1190,800 L1358,800 C1364.9,800 1364.9,900 1358,900 z" fill="#D3D3D3" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,850)" font-family="sans-serif" font-size="14" text-anchor="middle">Secrets Mgmt</text>
        <text transform="translate(1274,866.6)" font-family="sans-serif" font-size="14" text-anchor="middle">(Vault/KMS)</text>
        <path d="M1190,825 L1120,525" fill="none" stroke="#808080" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M1122.47,527.494 L1120,525 L1122.91,527.083 z" fill="#808080" stroke="#808080" stroke-width="1"/>
        <text transform="translate(1122,680)" font-family="sans-serif" font-size="13" text-anchor="middle">Inject</text>
        <text transform="translate(1122,695.2)" font-family="sans-serif" font-size="13" text-anchor="middle">Secrets</text>
    </g>

    <!-- ===================================================================== -->
    <!-- ======================= PHASE 2 STARTS HERE ========================= -->
    <!-- ===================================================================== -->
    <g id="Phase2_Optimizing" transform="translate(100, 1200)">
        <path d="M0,0 L1400,0 L1400,1000 L0,1000 z" fill="#FFFFFF"/>
        <text transform="translate(700,30)" font-family="sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Phase 2 - Optimizing with the Meta-AI (The Black Box)</text>
        <text transform="translate(140,100)" fill="#4A90E2" font-family="sans-serif" font-size="21" font-weight="bold">Stage 1: Data Generation</text>
        <g filter="url(#filter0)">
        <path d="M70,250 C63.0965,250 63.0965,130 70,130 L350,130 C356.904,130 356.904,250 350,250 z" fill="#4A90E2" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(210,190)" font-family="sans-serif" font-size="15" text-anchor="middle">Glass Box Engine</text>
        <text transform="translate(210,208)" font-family="sans-serif" font-size="15" text-anchor="middle">(Production System)</text>
        <g filter="url(#filter0)">
        <path d="M420,250 C413.096,250 413.096,130 420,130 L700,130 C706.904,130 706.904,250 700,250 z" fill="#6DB65B" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(560,190)" font-family="sans-serif" font-size="15" text-anchor="middle">ExecutionTrace Logs</text>
        <text transform="translate(560,208)" font-family="sans-serif" font-size="15" text-anchor="middle">(Goal, Plan, Steps, Output)</text>
        <path d="M350,190 L420,190" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M412.114,184.228 L420,190 L412.114,195.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(385,170)" font-family="sans-serif" font-size="14" text-anchor="middle">Generates</text>
        <g filter="url(#filter0)">
        <path d="M770,250 C763.096,250 763.096,130 770,130 L1050,130 C1056.9,130 1056.9,250 1050,250 z" fill="#6DB65B" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(910,190)" font-family="sans-serif" font-size="15" text-anchor="middle">Centralized Storage</text>
        <text transform="translate(910,208)" font-family="sans-serif" font-size="15" text-anchor="middle">(S3 / Data Warehouse)</text>
        <path d="M700,190 L770,190" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M762.114,184.228 L770,190 L762.114,195.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(735,170)" font-family="sans-serif" font-size="14" text-anchor="middle">Aggregates</text>
        <text transform="translate(140,350)" fill="#F5A623" font-family="sans-serif" font-size="21" font-weight="bold">Stage 2: Data Preparation</text>
        <g filter="url(#filter0)">
        <path d="M70,520 C56.1929,520 56.1929,370 70,370 L1050,370 C1063.81,370 1063.81,520 1050,520 z" fill="#F5A623" fill-opacity="0.2" stroke="#F5A623" stroke-width="1"/>
        </g>
        <g filter="url(#filter0)">
        <path d="M98,500 C91.0965,500 91.0965,400 98,400 L308,400 C314.904,400 314.904,500 308,500 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(203,450)" font-family="sans-serif" font-size="14" text-anchor="middle">1. Clean &amp; Filter</text>
        <text transform="translate(203,466.6)" font-family="sans-serif" font-size="14" text-anchor="middle">(Remove Failures)</text>
        <g filter="url(#filter0)">
        <path d="M350,500 C343.096,500 343.096,400 350,400 L560,400 C566.904,400 566.904,500 560,500 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(455,450)" font-family="sans-serif" font-size="14" text-anchor="middle">2. HITL Validation</text>
        <text transform="translate(455,466.6)" font-family="sans-serif" font-size="14" text-anchor="middle">(Quality Control)</text>
        <g filter="url(#filter0)">
        <path d="M602,500 C595.096,500 595.096,400 602,400 L882,400 C888.904,400 888.904,500 882,500 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(742,450)" font-family="sans-serif" font-size="14" text-anchor="middle">3. Format for SFT</text>
        <text transform="translate(742,466.6)" font-family="sans-serif" font-size="14" text-anchor="middle">(Goal -&gt; Reasoning -&gt; Output)</text>
        <path d="M308,450 L350,450" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M345.949,445.949 L350,450 L345.949,454.051 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <path d="M560,450 L602,450" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M597.949,445.949 L602,450 L597.949,454.051 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <path d="M910,250 L910,400" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M904.228,392.114 L910,400 L915.772,392.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(934,325)" font-family="sans-serif" font-size="14">Raw Data Input</text>
        <text transform="translate(140,600)" fill="#FF6F61" font-family="sans-serif" font-size="21" font-weight="bold">Stage 3: Fine-Tuning (SFT)</text>
        <g filter="url(#filter0)">
        <path d="M70,750 C63.0965,750 63.0965,630 70,630 L350,630 C356.904,630 356.904,750 350,750 z" fill="#C8B6FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(210,690)" font-family="sans-serif" font-size="15" text-anchor="middle">Base Model</text>
        <text transform="translate(210,708)" font-family="sans-serif" font-size="15" text-anchor="middle">(e.g., Llama 3, GPT-3.5)</text>
        <g filter="url(#filter0)">
        <path d="M420,750 C413.096,750 413.096,630 420,630 L770,630 C776.904,630 776.904,750 770,750 z" fill="#FF6F61" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(595,690)" font-family="sans-serif" font-size="15" text-anchor="middle">Fine-Tuning Infrastructure</text>
        <text transform="translate(595,708)" font-family="sans-serif" font-size="15" text-anchor="middle">(GPU Cluster / API Service)</text>
        <path d="M350,690 L420,690" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M412.114,684.228 L420,690 L412.114,695.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <path d="M742,520 L742,630" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M736.228,622.114 L742,630 L747.772,622.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(766,575)" font-family="sans-serif" font-size="14">Training Dataset</text>
        <text transform="translate(140,820)" fill="#A2D2FF" font-family="sans-serif" font-size="21" font-weight="bold">Stage 4: Validation and Deployment</text>
        <g filter="url(#filter0)">
        <path d="M840,750 C833.096,750 833.096,630 840,630 L1120,630 C1126.9,630 1126.9,750 1120,750 z" fill="#C8B6FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(980,690)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">Meta-AI Model</text>
        <text transform="translate(980,708)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">(Optimized Black Box)</text>
        <path d="M770,690 L840,690" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M832.114,684.228 L840,690 L832.114,695.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(805,670)" font-family="sans-serif" font-size="14" text-anchor="middle">Output</text>
        <g filter="url(#filter0)">
        <path d="M1190,750 C1183.1,750 1183.1,630 1190,630 L1358,630 C1364.9,630 1364.9,750 1358,750 z" fill="#A2D2FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,690)" font-family="sans-serif" font-size="13" text-anchor="middle">Evaluation</text>
        <text transform="translate(1274,705.2)" font-family="sans-serif" font-size="13" text-anchor="middle">(Latency, Cost,</text>
        <text transform="translate(1274,720.4)" font-family="sans-serif" font-size="13" text-anchor="middle">Quality, Alignment)</text>
        <path d="M1120,690 L1190,690" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M1182.11,684.228 L1190,690 L1182.11,695.772 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M1190,900 C1183.1,900 1183.1,800 1190,800 L1358,800 C1364.9,800 1364.9,900 1358,900 z" fill="#A2D2FF" stroke="#008000" stroke-width="1"/>
        </g>
        <text transform="translate(1274,850)" font-family="sans-serif" font-size="14" text-anchor="middle">Deploy to</text>
        <text transform="translate(1274,866.6)" font-family="sans-serif" font-size="14" text-anchor="middle">Hybrid System</text>
        <path d="M1274,750 L1274,800" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M1268.23,792.114 L1274,800 L1279.77,792.114 z" fill="#000000" stroke="#000000" stroke-width="1"/>
    </g>

    <!-- ===================================================================== -->
    <!-- ======================= PHASE 3 STARTS HERE ========================= -->
    <!-- ===================================================================== -->
    <g id="Phase3_HybridDeployment" transform="translate(100, 2350)">
        <path d="M0,0 L1400,0 L1400,1100 L0,1100 z" fill="#FFFFFF"/>
        <text transform="translate(700,30)" font-family="sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Phase 3 - The Hybrid Deployment Architecture</text>
        <g filter="url(#filter0)">
        <path d="M550,950 C543.096,950 543.096,900 550,900 L850,900 C856.904,900 856.904,950 850,950 z" fill="#A2D2FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(700,925)" font-family="sans-serif" font-size="15" text-anchor="middle">API Gateway (Auth, Rate Limit)</text>
        <g filter="url(#filter0)">
        <path d="M500,880 C493.096,880 493.096,780 500,780 L900,780 C906.904,780 906.904,880 900,880 z" fill="#4A90E2" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(700,845)" fill="#FFFFFF" font-family="sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Dispatcher (FastAPI)</text>
        <text transform="translate(700,815)" fill="#FFFFFF" font-family="sans-serif" font-size="14" text-anchor="middle">Intelligent Routing Logic</text>
        <text transform="translate(700,832.2)" fill="#FFFFFF" font-family="sans-serif" font-size="14" text-anchor="middle">(Complexity Analysis, Audit Requirements)</text>
        <path d="M700,970 L700,950" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M693.536,956.464 L700,950 L706.464,956.464 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(700,984)" font-family="sans-serif" font-size="15" text-anchor="middle">Client Request (Goal)</text>
        <path d="M700,900 L700,880" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M693.536,886.464 L700,880 L706.464,886.464 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M50,750 C36.1929,750 36.1929,450 50,450 L450,450 C463.807,450 463.807,750 450,750 z" fill="#E0C3FC" fill-opacity="0.30196" stroke="#9013FE" stroke-width="1"/>
        </g>
        <text transform="translate(250,720)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Optimized Path (High Volume/Low Latency)</text>
        <g filter="url(#filter0)">
        <path d="M100,670 C93.0965,670 93.0965,550 100,550 L400,550 C406.904,550 406.904,670 400,670 z" fill="#9013FE" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(250,625)" fill="#FFFFFF" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Meta-AI (Black Box)</text>
        <text transform="translate(250,595)" fill="#FFFFFF" font-family="sans-serif" font-size="14" text-anchor="middle">Inference Service</text>
        <text transform="translate(250,612.2)" fill="#FFFFFF" font-family="sans-serif" font-size="14" text-anchor="middle">(vLLM/Triton)</text>
        <path d="M500,830 L400,670" fill="none" stroke="#000000" stroke-width="1.5"/>
        <path d="M403.553,676.453 L400,670 L406.46,673.537 z" fill="#000000" stroke="#000000" stroke-width="1.5"/>
        <text transform="translate(430,800)" font-family="sans-serif" font-size="14" text-anchor="middle">Route: Optimized</text>
        <g filter="url(#filter0)">
        <path d="M950,750 C936.193,750 936.193,250 950,250 L1350,250 C1363.81,250 1363.81,750 1350,750 z" fill="#FFDCD7" fill-opacity="0.30196" stroke="#FF6F61" stroke-width="1"/>
        </g>
        <text transform="translate(1150,720)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Reliable Path (Complex/Audit Required)</text>
        <g filter="url(#filter0)">
        <path d="M1000,700 C993.096,700 993.096,640 1000,640 L1300,640 C1306.9,640 1306.9,700 1300,700 z" fill="#A2D2FF" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1150,670)" font-family="sans-serif" font-size="15" text-anchor="middle">Task Queue (Celery/RMQ)</text>
        <g filter="url(#filter0)">
        <path d="M1000,590 C993.096,590 993.096,470 1000,470 L1300,470 C1306.9,470 1306.9,590 1300,590 z" fill="#FF6F61" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1150,530)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">Worker Pool (Autoscaling)</text>
        <text transform="translate(1150,546)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">Glass Box Engine</text>
        <text transform="translate(1150,562)" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">(Planner, Agents, Executor)</text>
        <g filter="url(#filter0)">
        <path d="M1000,420 C993.096,420 993.096,320 1000,320 L1300,320 C1306.9,320 1306.9,420 1300,420 z" fill="#D3D3D3" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1150,370)" font-family="sans-serif" font-size="14" text-anchor="middle">External Services</text>
        <text transform="translate(1150,384.8)" font-family="sans-serif" font-size="14" text-anchor="middle">(LLM API, Vector DB)</text>
        <path d="M900,830 L1000,670" fill="none" stroke="#000000" stroke-width="1.5"/>
        <path d="M996.447,673.537 L1000,670 L993.54,676.453 z" fill="#000000" stroke="#000000" stroke-width="1.5"/>
        <text transform="translate(970,800)" font-family="sans-serif" font-size="14" text-anchor="middle">Route: Reliable</text>
        <path d="M1150,640 L1150,590" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M1143.54,596.464 L1150,590 L1156.46,596.464 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <path d="M1150,470 L1150,420" fill="none" stroke="#000000" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M1143.54,426.464 L1150,420 L1156.46,426.464 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M150,500 C143.096,500 143.096,450 150,450 L350,450 C356.904,450 356.904,500 350,500 z" fill="#FFFFFF" stroke="#FF0000" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        </g>
        <text transform="translate(250,475)" font-family="sans-serif" font-size="13" text-anchor="middle">Output Validation (Optional)</text>
        <path d="M350,475 L980,655" fill="none" stroke="#FF0000" stroke-dasharray="5.0,5.0" stroke-width="1"/>
        <path d="M974.638,650.525 L980,655 L973.595,653.141 z" fill="#FF0000" stroke="#FF0000" stroke-width="1"/>
        <text transform="translate(650,530)" fill="#FF0000" font-family="sans-serif" font-size="14" text-anchor="middle">Fallback (Low Confidence/Failure)</text>
        <g filter="url(#filter0)">
        <path d="M950,200 C943.096,200 943.096,140 950,140 L1350,140 C1356.9,140 1356.9,200 1350,200 z" fill="#6DB65B" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(1150,170)" font-family="sans-serif" font-size="15" text-anchor="middle">Result Store (Redis/DB)</text>
        <path d="M1150,320 L1150,200" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M1143.54,206.464 L1150,200 L1156.46,206.464 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <g filter="url(#filter0)">
        <path d="M550,200 C543.096,200 543.096,140 550,140 L850,140 C856.904,140 856.904,200 850,200 z" fill="#FFFFFF" stroke="#000000" stroke-width="2"/>
        </g>
        <text transform="translate(700,170)" font-family="sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Aggregated Response</text>
        <path d="M250,450 L550,170" fill="none" stroke="#9013FE" stroke-width="1.5"/>
        <path d="M543.534,173.543 L550,170 L546.457,176.469 z" fill="#9013FE" stroke="#9013FE" stroke-width="1.5"/>
        <path d="M950,170 L850,170" fill="none" stroke="#FF6F61" stroke-width="1.5"/>
        <path d="M856.464,163.536 L850,170 L856.464,176.464 z" fill="#FF6F61" stroke="#FF6F61" stroke-width="1.5"/>
        <path d="M700,140 L700,90" fill="none" stroke="#000000" stroke-width="1"/>
        <path d="M693.536,96.4644 L700,90 L706.464,96.4644 z" fill="#000000" stroke="#000000" stroke-width="1"/>
        <text transform="translate(700,80)" font-family="sans-serif" font-size="15" text-anchor="middle">Client Output</text>
        <g filter="url(#filter0)">
        <path d="M50,275 C43.0965,275 43.0965,125 50,125 L450,125 C456.904,125 456.904,275 450,275 z" fill="#F5A623" stroke="#000000" stroke-width="1"/>
        </g>
        <text transform="translate(250,200)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Retraining Pipeline (MLOps)</text>
        <text transform="translate(250,221.2)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">Data Collection, Preparation,</text>
        <text transform="translate(250,242.4)" font-family="sans-serif" font-size="17" font-weight="bold" text-anchor="middle">and Model Training</text>
        <path d="M1000,530 C1000,530 755.76,332.883 450,215" fill="none" stroke="#F5A623" stroke-dasharray="5.0,5.0" stroke-width="2"/>
        <path d="M455.253,218.529 L450,215 L456.639,214.988 z" fill="#F5A623" stroke="#F5A623" stroke-width="2"/>
        <text transform="translate(725,375)" fill="#B58800" font-family="sans-serif" font-size="15" font-weight="bold" text-anchor="middle">New ExecutionTraces (Edge Cases)</text>
        <path d="M250,275 L250,550" fill="none" stroke="#F5A623" stroke-dasharray="5.0,5.0" stroke-width="2"/>
        <path d="M243.536,543.536 L250,550 L256.464,543.536 z" fill="#F5A623" stroke="#F5A623" stroke-width="2"/>
        <text transform="translate(275,400)" fill="#B58800" font-family="sans-serif" font-size="14">Model Update</text>
    </g>

    <!-- ===================================================================== -->
    <!-- =================== CONNECTING ARROWS AND LABELS ==================== -->
    <!-- ===================================================================== -->
    <g id="Connectors">
        <!-- Arrow from Phase 1 (Result Store) to Phase 2 (ExecutionTrace Logs) -->
        <path d="M 1045 720 L 760 1380" stroke="#4A90E2" stroke-width="4" stroke-dasharray="10,10" fill="none" marker-end="url(#arrow)"/>
        <text x="900" y="1050" class="connector-text">Execution Traces from the Glass Box</text>
        <text x="900" y="1080" class="connector-text">Become Training Data for the Meta-AI</text>

        <!-- Arrow from Phase 2 (Meta-AI Model) to Phase 3 (Optimized Path) -->
        <path d="M 1080 1890 L 450 2800" stroke="#9013FE" stroke-width="4" stroke-dasharray="10,10" fill="none" marker-end="url(#arrow)"/>
        <text x="765" y="2350" class="connector-text" fill="#9013FE">Optimized Meta-AI Model</text>
        <text x="765" y="2380" class="connector-text" fill="#9013FE">is Deployed to the Hybrid System</text>
        
        <!-- Feedback Loop from Phase 3 (Reliable Path) back to Phase 2 (Data Prep) -->
        <path d="M 1250 2880 C 1550 2500, 1550 1800, 1010 1570" stroke="#F5A623" stroke-width="4" stroke-dasharray="10,10" fill="none" marker-end="url(#arrow)"/>
        <text x="1350" y="2200" class="connector-text" fill="#B58800">CONTINUOUS IMPROVEMENT</text>
        <text x="1350" y="2230" class="connector-text" fill="#B58800">New Traces from the Reliable Path</text>
        <text x="1350" y="2260" class="connector-text" fill="#B58800">Feed the Retraining Pipeline</text>
    </g>

</g>
</svg>
